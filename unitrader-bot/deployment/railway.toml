# Railway deployment configuration
# Docs: https://docs.railway.app/reference/config-as-code

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "uvicorn main:app --host 0.0.0.0 --port $PORT --workers 2"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
healthcheckPath = "/health"
healthcheckTimeout = 30

# Environment variables are set in the Railway dashboard.
# Required:
#   ENVIRONMENT=production
#   DATABASE_URL          (Railway PostgreSQL add-on)
#   JWT_SECRET_KEY
#   MASTER_ENCRYPTION_KEY
#   FIELD_ENCRYPTION_KEY
#   ANTHROPIC_API_KEY
#   STRIPE_SECRET_KEY
#   STRIPE_WEBHOOK_SECRET
#   STRIPE_PRO_PRICE_ID
#   RESEND_API_KEY
#   SENTRY_DSN            (optional)
#   ALLOWED_ORIGINS       (your Vercel frontend URL)
